<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <style>
        table {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }
        
        td, th {
          border: 1px solid #dddddd;
          text-align: left;
          padding: 8px;
        }
        
        tr:nth-child(even) {
          background-color: #dddddd;
        }
        </style>

</head>

<body>
    <div id="titel"></div>

    <table id="tabelle"></table>



    <script>

        $(document).ready(function () {
            // disable default event
            //event.preventDefault();

            loadAndDisplayAllBuchungen();
        });

        function zeigeBuchungen(arr) {

            $('#titel').html('<h1>Mein Buchungen</h1>');
            var tmp;

            if (arr.length == 0) {
                tmp.text('Keine Buchung vorhanden');
                return;
            }

            
            tmp +='<tr>';
                tmp +=   '<th>ID</th>';
                tmp +=   '<th>RaumID</th>';
                tmp +=  '<th>BenutzerID</th>';
                tmp +=  '<th>Startzeit</th>';
                tmp +=  '<th>Endzeit</th>';
                tmp +=  '<th>BuchungCode</th>';
                tmp += '</tr>';

            console.log("log test");
            //$('#schriebOrt').html('<h1>Überschrift</h1>');
            //$('#schriebOrt').append('<h1>Überschrift</h1>');
            //$('#schriebOrt').text('<h1>Überschrift</h1>');
            //fgdfh
            //dfdfg


            arr.forEach(obj => {
                tmp += '<tr>';
                tmp += '<td>' + obj.id + '</td>';
                tmp += '<td>' + obj.RaumID + '</td>';
                tmp += '<td>' + obj.BenutzerID + '</td>';
                tmp += '<td>' + obj.Startzeit + '</td>';
                tmp += '<td>' + obj.Endzeit + '</td>';
                tmp += '<td>' + obj.BuchungCode + '</td>';
                //tmp += '<td>' + (obj.alter >= 18 ? 'erwachsen' : 'Kind') + '</td>';
                tmp += '</tr>';
            });

            $('#tabelle').html(tmp);

        }


        function loadAndDisplayAllBuchungen() {
            console.log('loading all recs from api');

            $.ajax({
                url: 'http://localhost:8000/api/buchung/laden',
                method: 'get',
                contentType: 'application/json; charset=utf-8',
                cache: false,
                dataType: 'json'
            }).done(function (response) {
                console.log("Done")
                console.log(response);
                zeigeBuchungen(response);
            }).fail(function (jqXHR, statusText, error) {
                console.log('Response Code: ' + jqXHR.status + ' - Fehlermeldung: ' + jqXHR.responseText);
                $('#output').html('Ein Fehler ist aufgetreten');
                $('#pics').text('Keine Bilder vorhanden');
            });
        }








    </script>

</body>

</html>